platform: template
switches:
  bureau_martijn_template:
    value_template: "{{ is_state('switch.bureau_martijn', 'on') }}"
    turn_on:
      - service: switch.turn_on
        target:
          entity_id: switch.bureau_martijn
    turn_off:
      - if: "{{ is_state('binary_sensor.computer_zolder', 'on') }}"
        then:
          - service: hassio.addon_stdin
            data:
              addon: core_rpc_shutdown
              input: computer_zolder
      - wait_template: "{{ is_state('binary_sensor.computer_zolder', 'off') }}"
      - service: switch.turn_off
        target:
          entity_id: switch.bureau_martijn
